<% layout('layouts/boilerplate') -%>
<h1>Posts Index!</h1>

<div id="map"></div>

<% include ../partials/paginatePosts %>

<% posts.docs.forEach(function(post) { %>
<div class="">
  <h2><%= post.title %></h2>
  <div class="">
    Price: <%= post.price %>
  </div>
  <div class="">
    Description: <%= post.description %>
  </div>
  <div class="">
    Location: <%= post.location %>
  </div>
  <div class=""><a href="/posts/<%= post.id %>">View More</a></div>
</div>
<% }) %>

<% include ../partials/paginatePosts %>

<script type="text/javascript">
  mapboxgl.accessToken = "<%= mapBoxPublicToken %>";
  var posts = {features: <%- JSON.stringify(posts.docs) %>};
</script>
<script src="/javascripts/allPostsClusterMap.js" type="text/javascript"></script>
